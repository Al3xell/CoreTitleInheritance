core_title_text_line = {
    scope = character

    is_shown = {
        has_core_titles = yes
    }
    
    is_valid = { # multiple core titles
        1 < root.num_core_titles
    }
}

core_limit_display = {
    scope = character
    
   
    is_shown = {
        is_over_core_limit = yes
    }
    
    
    effect = {
        # Generate tooltip
        set_variable = {
            name = _core_limit
            value = root.val_core_limit
        }
        set_variable = {
            name = _num_core_titles
            value = root.num_core_titles
        }
        var:core_count = {save_temporary_scope_as = _core_count}
        custom_tooltip = CORE_LIMIT_TOOLTIP_HEADER
        if = {
            limit = {is_over_core_limit = yes}
            custom_tooltip = CORE_LIMIT_EXCEEDED_TOOLTIP
            root.amount_over_core_limit = {save_temporary_scope_as = _amount_over_core_limit}
            if = {
                limit = {
                    root.amount_over_core_limit > 1
                }
                custom_tooltip = CORE_LIMIT_OVER_EFFECTS_HEADING_TOOLTIP
            }
            else = {
                custom_tooltip = CORE_LIMIT_OVER_EFFECTS_SINGULAR_HEADING_TOOLTIP
            }
            set_variable = {
                name = _val_over_core_limit_penalty
                value = -0.05
            }
            change_variable = {
                name = _val_over_core_limit_penalty
                multiply = root.amount_over_core_limit
            }
            custom_tooltip = CORE_LIMIT_OVERRUN_EFFECT
        }
    }
}

# core_capital_chain_character_display = {
    # scope = character
    
    # is_valid = { # multiple capital chain cores
        # 1 < root.count_core_due_to_capital
    # }
# }

core_capital_chain_title_display = {
    scope = title
    
    is_shown = {
        is_title_core_due_to_capital = yes
    }
}

core_special_character_display = {
    scope = character
    
    is_shown = {
        any_core_title_item = {is_title_special_core = yes}
    }
    
    is_valid = { # multiple special cores
        1 < root.count_core_due_to_special
    }
}

core_special_title_display = {
    scope = title
    
    
    is_shown = {
        is_title_special_core = yes
    }
}

core_mod_character_display = {
    scope = character
    
    is_shown = {
        any_core_title_item = {is_title_core_due_to_cti = yes}
    }
    
    is_valid = { # multiple special cores
        1 < count_core_due_to_mod
    }
}

core_mod_title_display = {
    scope = title
    
    
    is_shown = {
        is_title_core_due_to_cti = yes
    }
}