designate_core_button = {
    scope = title
    
    is_shown = {
        And = {
            is_title_core = no
            tier >= tier_county
        }
    }
    
    is_valid = {
        can_core_title = yes
        trigger_if = {
            limit = {
                has_game_rule = flat_designate_core_county_cost
                does_core_count_to_limit = yes
            }
            holder = {prestige >= coring_county_refund_flat_full}
        }
    }
    
    effect = {
        # # Generate tooltip
        # save_temporary_scope_as = _title
        # if = {
            # limit = {can_core_title = yes}
            # custom_tooltip = TITLE_DESIGNATE_CORE_TOOLTIP
        # }
        # else_if = {
            # limit = {is_title_ineligible_due_to_title_law = yes}
            # custom_tooltip = TITLE_DESIGNATE_CORE_TOOLTIP_TITLE_LAW
        # }
        # else_if = {
            # limit = {is_title_eligible_for_core = no}
            # custom_tooltip = TITLE_DESIGNATE_CORE_TOOLTIP_NO_CHILD
        # }
        # else_if = {
            # limit = {
                # has_game_rule = flat_designate_core_county_cost
                # does_core_count_to_limit = yes
                # holder = {prestige >= coring_county_refund_flat_full}
            # }
            # custom_tooltip = TITLE_DESIGNATE_CORE_TOOLTIP_NO_PRESTIGE
        # }
        
        # do the coring
        designate_core_title = yes
    }
}

de_designate_core_button = {# I am assuming that the root here will be the title.
    scope = title
    
    is_shown = {
        is_title_core = yes # has built in barony check
    }
    
    is_valid = {
        can_de_core_title = yes
    }
    
    effect = {
        # # Generate tooltip
        # save_temporary_scope_as = _title
        # if = {
            # limit = {can_de_core_title = yes}
            # custom_tooltip = TITLE_DE_DESIGNATE_CORE_TOOLTIP
        # }
        # else_if = {
            # limit = {is_title_core_due_to_capital = yes}
            # custom_tooltip = TITLE_DE_DESIGNATE_CORE_TOOLTIP_CAPITAL_CHAIN
        # }
        # else_if = {
            # limit = {holder.primary_title = root}
            # custom_tooltip = TITLE_DE_DESIGNATE_CORE_TOOLTIP_PRIMARY_TITLE
        # }
        # else_if = {
            # limit = {will_core_loss_break_chain = yes}
            # custom_tooltip = TITLE_DE_DESIGNATE_CORE_TOOLTIP_NO_SIBLING
        # }
        # I can't access this value, so special titles like head of faith titles are not counted.
        # else_if = {
        #     limit = {always_follows_primary_heir}
        #     custom_tooltip = TITLE_DE_DESIGNATE_CORE_TOOLTIP_SPECIAL_TITLE
        # }
        
        # do the de_designating core
        de_designate_core_title = yes
    }
}