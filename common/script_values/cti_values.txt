val_core_limit = { # scope is character
    if = {
        limit={ has_game_rule = half_domain_core_county_limit }
        value = domain_limit
        divide = 2
        ceiling = yes
    }
    else_if = {
        limit={ has_game_rule = domain_core_county_limit }
        value = domain_limit
    }
    else_if = {
        limit={ has_game_rule = ludicrous_core_county_limit }
        value = 10000
    }
}

coring_county_cost_flat = {value = medium_prestige_loss}
coring_county_refund_flat = {value = minor_prestige_gain}
coring_county_refund_flat_full = {value = medium_prestige_gain}

core_count = {
    value = 0
    every_held_title = {
        if = {
            limit = {
                is_title_core = yes
                does_core_count_to_limit = yes
            }
            add = 1
        }
    }
}

amount_over_core_limit = { # scope is character
    value = core_count
    subtract = val_core_limit
    min = 0 # sets lower bound of 0
}

#over_core_limit_prestige_modifier = {
#    value = -0.05
#    multiply = over_core_limit
#    min = -0.5 # sets lower bound
#}

#Not used
#get_core_count = { # scope is a character
#    if = {
#    limit = {NOT = {has_variable = core_count}}
#        initialize_core_count
#    }
#    var:core_count
#}

num_core_titles = {
    value = 0
    every_held_title = {
        if = {
            limit = {is_title_core = yes}
            add = 1
        }
    }
}
# Only used in one place, but think I need it here to accomodate it.
count_core_due_to_capital = {
    value = 0
    every_held_title = {
        if = {
            limit = {
                is_title_core = yes
                is_title_core_due_to_capital = yes
            }
            add = 1
        }
    }
}

count_core_due_to_special = {
    value = 0
    every_held_title = {
        if = {
            limit = {
                is_title_core = yes
                is_title_special_core = yes
                }
            add = 1
        }
    }
}

count_core_due_to_mod = {
    value = 0
    every_held_title = { # if this does not exist this should quietly fail and the value will be 0
        if = {
            limit = {
                is_title_core = yes
                is_title_core_due_to_cti = yes
            }
            add = 1
        }
    }
}