designate_core = {
    scope = character
    saved_scopes = {
        title_
    }
    is_shown = {
        #AND = {
        #    title_.holder = root # might be redundant
            NOT = {is_title_core = {title_}}
        #}
    }
    
    is_valid = {
        can_core_title = {title_}
    }
    
    effect = {
        # Generate tooltip
        if = {
            limit = {title_.can_core_title}
            custom_tooltip = TITLE_DESIGNATE_CORE_TOOLTIP
        }
        else = {
            custom_tooltip = {# Essentially breaking down is elligible for core into it's components
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            NOT = {is_title_eligible_for_core = {title_}}
                        }
                        desc = TITLE_DESIGNATE_CORE_TOOLTIP_NO_CHILD
                    }
                    triggered_desc = {
                        trigger = {
                            is_over_core_limit = {root}
                        }
                        desc = TITLE_DESIGNATE_CORE_TOOLTIP_OVER_LIMIT
                    }
                    desc = "This should never appear. Something has gone wrong."
                }
            }
        }
        
        # do the coring
        designate_core_title = {title_}
    }
}

de_designate_core = {
    scope = character
    saved_scopes = {
        title_
    }
    is_shown = {
        #AND = {
        #    title_.holder = root # might be redundant
            is_title_core = {title_}
        #}
    }
    
    is_valid = {
        can_de_core_title = {title}
    }
    
    effect = {
        # Generate tooltip
        if = {
            limit = {can_de_core_title = {title_}}
            custom_tooltip = TITLE_DE_DESIGNATE_CORE_TOOLTIP
        }
        else = {
            custom_tooltip = {# Essentially breaking down is elligible for core into it's components
                first_valid = {
                    triggered_desc = {
                        trigger = {
                            is_title_core_due_to_capital = {title_}
                        }
                        desc = TITLE_DE_DESIGNATE_CORE_TOOLTIP_CAPITAL_CHAIN
                    }
                    triggered_desc = {
                        trigger = {
                            root.primary_title = this
                        }
                        desc = TITLE_DE_DESIGNATE_CORE_TOOLTIP_PRIMARY_TITLE
                    }
                    triggered_desc = {
                        trigger = {
                            will_core_loss_break_titles = {title_}
                        }
                        desc = TITLE_DE_DESIGNATE_CORE_TOOLTIP_NO_SIBLING
                    }
                    triggered_desc = {
                        trigger = {
                            always_follows_primary_heir = {title_}
                        }
                        desc = TITLE_DE_DESIGNATE_CORE_TOOLTIP_SPECIAL_TITLE
                    }
                    desc = "This should never appear. Something has gone wrong."
                }
            }
        }
        
        # do the de_designating core
        de_designate_core_title = {title_}
    }
}